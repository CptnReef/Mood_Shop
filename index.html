<!DOCTYPE html>
<html>
<head>
  <link rel='stylesheet' href='./resources/css/styles.css'>
  <link rel='flexing' href='data.js'>
<title></title>
</head>

<body>

    <header class='page-header'>
        <h4>The Mood Shop</h4>
        <nav class='nav-bar'>
          <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Cart</a></li>
          </ul>
        </nav>
      </header>
      <main class='items' id='items'>
        <!--
          Display moods here
         -->
    </main>
    <footer>
      <ul id='item-list'>
        <!-- cart items -->
        <div id='cart-qty'>
          <!-- cart qty here -->
        </div>
        <ul id='item-list'>
          <!-- cart items -->
        </ul>
        <div id='cart-total'>
          <!-- cart total -->
        </div>
      </ul>

    </footer>
    <script>
      const itemList = document.getElementById('item-list')
      const cartQty = document.getElementById('cart-qty')
      const cartTotal = document.getElementById('cart-total')


      itemList.innerHTML = '<li> Hello World</li>'

      //---------------------------------------------------------------------------
      const cart = []

      const a = 99
      const b = 66
      const c = "hey"
      const d = "woah"
      const  obj = {a, b, c, d}

      console.log(obj)
      console.log(`****************************************`)

//----------------------------------------------------------
      function addItem(name,price){
        for (let i = 0; i < cart.length; i += 1) {
          if (cart[i].name === name) {
              cart[i].qty += 1
              return
              //stop here
          }
        }
        const item = {name:name,price:price,qty:1}
        cart.push(item)
      }

//----------------------------------------------------------
      // Show Items
      function showItems() {
        const qty = getQty()
        console.log(`You have ${qty} items in your cart.`) 
        cartQty.innerHTML = `You have ${qty} items in your cart.`

        let itemStr = ''
        for (let i = 0; i < cart.length; i += 1) {
          //console.log(`- ${cart[i].name} $${cart[i].price} x ${cart[i].qty}`) 
         // { name:'Apples', price:2.99, qty: 3}
          
          const { name, price, qty} = cart[i]

          itemStr += `<li>
            ${cart[i].name}
            $${cart[i].price} x ${cart[i].qty} = 
            ${cart[i].qty * cart[i].price} </li>`
       }
       itemList.innerHTML = itemStr

//        console.log(`Total in cart: $${getTotal()}`)
        carTotal.innerHTML = `Total in cart: $${getTotal()}`
      }

//----------------------------------------------------------
      // Get Qty
      function getQty() {
        let qty = 0
        for (let i = 0; i < cart.length; i += 1) {
          qty += cart[i].qty
        }
        return qty
      }

//----------------------------------------------------------
      // Get total
      function getTotal() {
        let total = 0
        for (let i = 0; i < cart.length; i += 1) {
        total += cart[i].price * cart[i].qty
       }
       return total.toFixed(2)
      }

//----------------------------------------------------------
      function removeItem(name, qty = 0) {
        for (let i = 0; i < cart.length; i += 1) {
          if (cart[i].name === name) {
            if (qty > 0) {
              cart[i].qty -= qty
            }

            if (cart[i].qty < 1 || qty === 0) {
              cart.splice(i, 1)           
            }
            return
          }
        }
      }


//----------------------------------------------------------

      addItem("Apples",2.99)
      addItem("Apples",2.99)
      addItem("Oranges",1.99)
      addItem("Oranges",1.99)
      addItem("Oranges",1.99)
      addItem("Coconuts",0.99)
      addItem("Bananas",1.99)
      addItem("Bananas",1.99)

      removeItem('Bananas')

      showItems()
    </script>
    <script src='./resources/js/scripts.js' type="module"></script>
  </body>
</html>